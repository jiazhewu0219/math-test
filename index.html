<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¤¾å€é•·è¼©èªçŸ¥è¨“ç·´ - æ•¸å­¸ç·´ç¿’ç”¢ç”Ÿå™¨ (18pt)</title>
    <!-- å¼•å…¥ Tailwind CSS ç”¨æ–¼å¿«é€Ÿæ’ç‰ˆ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* A4 è¦æ ¼å„ªåŒ– */
        @media print {
            .no-print { display: none !important; }
            body { background: white !important; margin: 0; padding: 0; }
            .page-break { 
                page-break-after: always; 
                margin: 0 !important;
                padding: 15mm !important;
                width: 210mm;
                height: 297mm;
                box-shadow: none !important;
            }
            @page {
                size: A4;
                margin: 0;
            }
        }
        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            -webkit-print-color-adjust: exact;
        }
        /* è¢å¹•é è¦½æ™‚çš„é é¢é™°å½± */
        .page-preview {
            width: 210mm;
            height: 297mm;
            padding: 15mm;
            margin: 20px auto;
            background: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
        }
        /* è¨­å®š 18pt å­—é«”å¤§å° */
        .elderly-text {
            font-size: 18pt !important;
            line-height: 1.6;
        }
    </style>
</head>
<body class="bg-slate-100">
    <div id="root"></div>

    <!-- è¼‰å…¥æ ¸å¿ƒ React èˆ‡ Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="text/babel">
        const { useState } = React;

        const App = () => {
            const [difficulty, setDifficulty] = useState('20');
            const [type, setType] = useState('mix');
            const [pageCount, setPageCount] = useState(1);
            const [pages, setPages] = useState([]);

            const generateContent = () => {
                const newPages = [];
                const limit = parseInt(difficulty);
                const questionsPerPage = 20;

                for (let p = 1; p <= pageCount; p++) {
                    const questions = [];
                    for (let i = 1; i <= questionsPerPage; i++) {
                        let n1, n2, op, ans;
                        
                        if (type === 'add') op = '+';
                        else if (type === 'sub') op = '-';
                        else op = Math.random() > 0.5 ? '+' : '-';

                        if (op === '+') {
                            n1 = Math.floor(Math.random() * (limit - 1)) + 1;
                            n2 = Math.floor(Math.random() * (limit - n1)) + 1;
                            ans = n1 + n2;
                        } else {
                            n1 = Math.floor(Math.random() * (limit - 1)) + 2;
                            n2 = Math.floor(Math.random() * (n1 - 1)) + 1;
                            ans = n1 - n2;
                        }
                        questions.push({ id: i, n1, n2, op, ans });
                    }
                    newPages.push({ id: p, questions });
                }
                setPages(newPages);
            };

            return (
                <div className="min-h-screen pb-10">
                    {/* æ§åˆ¶é¢æ¿ */}
                    <div className="no-print sticky top-0 z-50 bg-white shadow-md p-6 mb-6 border-b-4 border-blue-500">
                        <div className="max-w-5xl mx-auto">
                            <h1 className="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                                ğŸ“Š é•·è¼©èªçŸ¥è¨“ç·´ç”¢ç”Ÿå™¨ (18pt å¼·åŒ–ç‰ˆ)
                            </h1>
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                                <div>
                                    <label className="block text-sm font-bold text-slate-600 mb-1">é›£åº¦ (æ•¸å­—ä¸Šé™)</label>
                                    <select value={difficulty} onChange={(e) => setDifficulty(e.target.value)} className="w-full p-2 border rounded border-slate-300">
                                        <option value="10">åˆç´š (10ä»¥å…§)</option>
                                        <option value="20">ä¸­ç´š (20ä»¥å…§)</option>
                                        <option value="100">é€²éš (100ä»¥å…§)</option>
                                    </select>
                                </div>
                                <div>
                                    <label className="block text-sm font-bold text-slate-600 mb-1">é¡Œå‹é¸æ“‡</label>
                                    <select value={type} onChange={(e) => setType(e.target.value)} className="w-full p-2 border rounded border-slate-300">
                                        <option value="add">ç´”åŠ æ³•</option>
                                        <option value="sub">ç´”æ¸›æ³•</option>
                                        <option value="mix">åŠ æ¸›æ··åˆ</option>
                                    </select>
                                </div>
                                <div>
                                    <label className="block text-sm font-bold text-slate-600 mb-1">åˆ—å°å¼µæ•¸</label>
                                    <input type="number" min="1" max="20" value={pageCount} onChange={(e) => setPageCount(parseInt(e.target.value))} className="w-full p-2 border rounded border-slate-300" />
                                </div>
                                <div className="flex gap-2">
                                    <button onClick={generateContent} className="flex-1 bg-blue-600 text-white font-bold py-2 rounded hover:bg-blue-700">ç”Ÿæˆé¡Œç›®</button>
                                    <button onClick={() => window.print()} className="flex-1 bg-green-600 text-white font-bold py-2 rounded hover:bg-green-700 transition">ä¸‹è¼‰/åˆ—å°</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* é é¢å…§å®¹ */}
                    <div className="flex flex-col items-center">
                        {pages.length === 0 && (
                            <div className="mt-20 text-slate-400 text-center no-print">
                                <p className="text-xl">è«‹è¨­å®šåƒæ•¸å¾Œé»æ“Šã€Œç”Ÿæˆé¡Œç›®ã€</p>
                            </div>
                        )}

                        {pages.map(page => (
                            <div key={`p-${page.id}`} className="page-preview page-break flex flex-col">
                                <div className="flex justify-between items-end border-b-2 border-slate-800 pb-2 mb-10">
                                    <div>
                                        <h2 className="text-3xl font-bold">æ•¸å­¸èªçŸ¥ç·´ç¿’ (ç¬¬ {page.id} é )</h2>
                                        <p className="text-sm text-slate-500 font-medium">é›£åº¦ï¼š{difficulty} ä»¥å…§ | æ¯é¡Œ 5 åˆ†</p>
                                    </div>
                                    <div className="text-right">
                                        <p className="text-xl font-bold italic mb-1">å¾—åˆ†ï¼š________ / 100</p>
                                        <p className="text-lg">å§“åï¼š________________</p>
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-x-12 gap-y-6 flex-grow">
                                    {page.questions.map(q => (
                                        <div key={q.id} className="flex items-center justify-between border-b-2 border-slate-100 pb-3">
                                            <span className="text-slate-400 font-mono w-8" style={{fontSize: '14pt'}}>{q.id}.</span>
                                            <span className="elderly-text font-bold flex-1 text-center tracking-widest">
                                                {q.n1} {q.op} {q.n2} =
                                            </span>
                                            <div className="w-24 h-14 border-2 border-slate-400 rounded bg-white shadow-inner"></div>
                                        </div>
                                    ))}
                                </div>
                                
                                <div className="mt-8 pt-4 border-t border-slate-200 text-center text-slate-400 text-sm">
                                    æ­¤æ•™æç”±é•·ç…§æ©Ÿæ§‹å°ˆç”¨æ•¸å­¸ç”¢ç”Ÿå™¨ç”Ÿæˆ | é©åˆèªçŸ¥ä¿ƒé€²æ´»å‹•ä½¿ç”¨
                                </div>
                            </div>
                        ))}

                        {/* ç­”æ¡ˆæª¢æ ¸é  */}
                        {pages.length > 0 && (
                            <div className="page-preview page-break bg-slate-50 border-4 border-double border-slate-300">
                                <h2 className="text-3xl font-bold text-center mb-10 border-b-4 border-slate-300 pb-4">ã€ ç­”æ¡ˆæª¢æ ¸é  ã€‘</h2>
                                <div className="grid grid-cols-2 gap-8">
                                    {pages.map(page => (
                                        <div key={`ans-p-${page.id}`} className="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                                            <h3 className="font-bold text-xl text-blue-800 border-b-2 border-blue-100 mb-4 pb-1 flex justify-between">
                                                <span>ç¬¬ {page.id} é </span>
                                                <span className="text-sm font-normal text-slate-400">æ ¸å°ç”¨</span>
                                            </h3>
                                            <div className="grid grid-cols-4 gap-2 text-lg">
                                                {page.questions.map(q => (
                                                    <div key={q.id} className="flex flex-col items-center bg-slate-50 rounded py-2 border border-slate-100">
                                                        <span className="text-slate-400 text-xs font-mono mb-1">{q.id}</span>
                                                        <span className="font-black text-slate-900">{q.ans}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-12 p-6 bg-blue-50 border-l-8 border-blue-400 rounded text-blue-900">
                                    <p className="font-bold mb-2">ç£å°å¯¦å‹™ç´€éŒ„è¦é»ï¼š</p>
                                    <ul className="list-disc ml-5 space-y-1 text-sm">
                                        <li>æ­£ç¢ºç‡ï¼šç´€éŒ„é•·è¼©å®Œæˆçš„ç™¾åˆ†æ¯”ã€‚</li>
                                        <li>åæ‡‰æ™‚é–“ï¼šé•·è¼©æ˜¯å¦åœ¨æŸäº›æ•¸å­—çµ„åˆåœé “è¼ƒä¹…ï¼ˆè§€å¯ŸåŸ·è¡ŒåŠŸèƒ½ç¼ºæï¼‰ã€‚</li>
                                        <li>éŒ¯èª¤å‹æ…‹ï¼šæ˜¯é‹ç®—éŒ¯èª¤ï¼Œé‚„æ˜¯æ•¸å­—æ›¸å¯«ä¸æ¸…ï¼ˆè§€å¯Ÿç²¾ç´°å‹•ä½œæ§åˆ¶ï¼‰ã€‚</li>
                                    </ul>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
